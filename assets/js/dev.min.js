function loadJS(A,e,t){var o=!!window.ActiveXObject,a=o&&!window.XMLHttpRequest,i=document.createElement("script"),r=a?document.documentElement:document.getElementsByTagName("head")[0];i.type="text/javascript",i.async=!0,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e&&e())}:i.onload=function(){e&&e()},i.src=A,t?document.getElementById(t).appendChild(i):r.insertBefore(i,r.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var A=$(window),e={top:A.scrollTop(),left:A.scrollLeft()};e.right=e.left+A.width(),e.bottom=e.top+A.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}});var duoshuoQuery={short_name:"life-2bab"},GlobalConfigue={duoshuoDomain:"http://life.2bab.me"},General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var A=window,e=(A.document,navigator.userAgent.toLowerCase()),t=A.navigator.appVersion.match(/android/gi);A.navigator.appVersion.match(/iphone/gi);"micromessenger"==e.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos(),General.arrowEvent(),General.commentLoader()},updateImageWidth:function(){function A(){var A=$(this),e=t.outerWidth(),o=this.naturalWidth;o>=e?A.addClass("full-img"):A.removeClass("full-img")}function e(){o.each(A)}var t=$(".post-content"),o=$(".single-post-inner img").on("load",A);e()},webFontLoader:function(){WebFontConfig={loading:function(){},custom:{families:["Exo","iconfont"],urls:[General.absUrl+"/assets/css/font.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Exo","iconfont"]}})})},arrowEvent:function(){$(".arrow_down").click(function(){return $("html,body").animate({scrollTop:$(window).height()-20},600,function(){window.location.hash="#"}),!1})},scrollToPos:function(A){var e="我要飞到最高",t=(A||$(window).height(),$('<a href="#" id="to-top" title="'+e+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(A){A.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(A){var e,t,o="iconfont",a={twitter:o+"-twitter",qzone:o+"-qzone",weibo:o+"-weibo",facebook:o+"-facebook",github:o+"-github",douban:o+"-douban",google:o+"-google",luolei:o+"-luolei",dribble:o+"-dribble",v2ex:o+"-v2ex",zhihu:o+"-zhihu",wikipedia:o+"-wikipedia",jianshu:o+"-jianshu",youku:o+"-youku",youtube:o+"-youtube"};for(var i in a)if("function"!=typeof a[i]){var r=i;A.indexOf(r)>=0&&(e=r,t=a[r])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(A){var e=$(this).attr("href"),t=document.createElement("a");t.href=e,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var o=$(this).find("i").css("color"),a=$(this).css("color");$(this).hover(function(){$(this).css("color",o),$(this).addClass("animated pulse")},function(){$(this).css("color",a),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var A={alipay:"/assets/images/qr-alipay-256.png",wechat:"/assets/images/qr-wechat-256.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){$("img.wechat-img").attr("src",A.wechat),$("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",A.wechat),$(this).find("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})},commentLoader:function(){if(!$("body").hasClass("post-template"))return!1;var A=GlobalConfigue.duoshuoDomain+location.pathname;$(window).scroll(function(){return $(".comment-area").has("div").length>0?!1:void(($(".author-image").isOnScreenVisible()||$(".read-next").isOnScreenVisible())&&0==$(".author-image").hasClass("duoshuo-loaded")&&($(".author-image").addClass("duoshuo-loaded"),loadJS(General.absUrl+"/assets/js/duoshuo.modify.js",function(){var e=document.createElement("div");e.setAttribute("data-thread-key",A),e.setAttribute("data-url",location.href),e.setAttribute("data-title",$("title").html()),DUOSHUO.EmbedThread(e),scrollStop=!0,setTimeout(function(){$(".comment-area").append(e)},250)})))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(A,e){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},o=new Image;o.onload=function(){o.width>0&&o.height>0;ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},o.onerror=function(){ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},o.src="data:image/webp;base64,"+t.demo},imgLoader:function(){},webPLoader:function(){if(1==ImageSmartLoader.isWebPSupported){if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var A=$(window);$.fn.lazyload=function(e){function t(){var A=0;a.each(function(){var e=$(this);if(!i.skip_invisible||e.is(":visible"))if($.abovethetop(this,i)||$.leftofbegin(this,i));else if($.belowthefold(this,i)||$.rightoffold(this,i)){if(++A>i.failure_limit)return!1}else e.trigger("appear"),A=0})}var o,a=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,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",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),$.extend(i,e)),o=void 0===i.container||i.container===window?A:$(i.container),0===i.event.indexOf("scroll")&&o.bind(i.event,function(){return t()}),this.each(function(){var A=this,e=$(A);A.loaded=!1,void 0!==e.attr("src")&&e.attr("src")!==!1||e.is("img")&&(e.attr("src",i.placeholder),e.addClass("loading")),e.one("appear",function(){if(!this.loaded){if(i.appear){var t=a.length;i.appear.call(A,t,i)}var o=e.attr("data-"+i.data_attribute);(o.indexOf("qiniucnd")>-1||o.indexOf("clouddn")>-1)&&(1==i.advanced_load&&(o+="!"),1==i.is_scale&&(o+="/0/w/"+i.scale_width),1==i.webP_load&&(o+="/format/webp")),$("<img />").bind("load",function(){e.hide(),e.is("img")?e.attr("src",o):e.css("background-image","url('"+o+"')"),e[i.effect](i.effect_speed),A.loaded=!0;var t=$.grep(a,function(A){return!A.loaded});if(a=$(t),i.load){var r=a.length;i.load.call(A,r,i)}e.removeClass("loading")}).attr("src",o)}}),0!==i.event.indexOf("scroll")&&e.bind(i.event,function(){A.loaded||e.trigger("appear")})}),A.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&A.bind("pageshow",function(A){A.originalEvent&&A.originalEvent.persisted&&a.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(e,t){var o;return o=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:A.height())+A.scrollTop():$(t.container).offset().top+$(t.container).height(),o<=$(e).offset().top-t.threshold},$.rightoffold=function(e,t){var o;return o=void 0===t.container||t.container===window?A.width()+A.scrollLeft():$(t.container).offset().left+$(t.container).width(),o<=$(e).offset().left-t.threshold},$.abovethetop=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollTop():$(t.container).offset().top,o>=$(e).offset().top+t.threshold+$(e).height()},$.leftofbegin=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollLeft():$(t.container).offset().left,o>=$(e).offset().left+t.threshold+$(e).width()},$.inviewport=function(A,e){return!($.rightoffold(A,e)||$.leftofbegin(A,e)||$.belowthefold(A,e)||$.abovethetop(A,e))},$.extend($.expr[":"],{"below-the-fold":function(A){return $.belowthefold(A,{threshold:0})},"above-the-top":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-screen":function(A){return $.rightoffold(A,{threshold:0})},"left-of-screen":function(A){return!$.rightoffold(A,{threshold:0})},"in-viewport":function(A){return $.inviewport(A,{threshold:0})},"above-the-fold":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-fold":function(A){return $.rightoffold(A,{threshold:0})},"left-of-fold":function(A){return!$.rightoffold(A,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&(General.addIcons(),General.commentLoader())});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsibG9hZEpTIiwidXJsIiwiY2FsbGJhY2siLCJlbCIsImlzSUUiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiaXNJRTYiLCJYTUxIdHRwUmVxdWVzdCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInR5cGUiLCJhc3luYyIsInJlYWR5U3RhdGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmxvYWQiLCJzcmMiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIiQiLCJmbiIsImV4dGVuZCIsImlzT25TY3JlZW5WaXNpYmxlIiwiaGFzQ2xhc3MiLCJ3aW4iLCJ2aWV3cG9ydCIsInRvcCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImhlaWdodCIsImJvdW5kcyIsInRoaXMiLCJvZmZzZXQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJkdW9zaHVvUXVlcnkiLCJzaG9ydF9uYW1lIiwiR2xvYmFsQ29uZmlndWUiLCJkdW9zaHVvRG9tYWluIiwiR2VuZXJhbCIsImlzTW9iaWxlIiwiaXNXZWNoYXQiLCJ2aWV3V2lkdGgiLCJhYnNVcmwiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImluaXQiLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaXNBbmRyb2lkIiwiYXBwVmVyc2lvbiIsIm1hdGNoIiwiYWRkQ2xhc3MiLCJ1cGRhdGVJbWFnZVdpZHRoIiwicmV3YXJkTG9hZGVyIiwid2ViRm9udExvYWRlciIsInNjcm9sbFRvUG9zIiwiYXJyb3dFdmVudCIsImNvbW1lbnRMb2FkZXIiLCIkdGhpcyIsImNvbnRlbnRXaWR0aCIsIiRwb3N0Q29udGVudCIsImltYWdlV2lkdGgiLCJuYXR1cmFsV2lkdGgiLCJyZW1vdmVDbGFzcyIsImNhc3BlckZ1bGxJbWciLCIkaW1nIiwiZWFjaCIsIm9uIiwiV2ViRm9udENvbmZpZyIsImxvYWRpbmciLCJjdXN0b20iLCJmYW1pbGllcyIsInVybHMiLCJXZWJGb250IiwibG9hZCIsImNsaWNrIiwiYW5pbWF0ZSIsImhhc2giLCJwb3NpdGlvbiIsIlNUUl9UT19UT1AiLCJidXR0b24iLCJhcHBlbmRUbyIsInNjcm9sbCIsImZhZGVJbiIsImZhZGVPdXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ1cmxJY29ubGl6ZSIsImRvbWFpbiIsIl9vdXRwdXQiLCJpY29uRm9udFRhZyIsImljb25NYXAiLCJ0d2l0dGVyIiwicXpvbmUiLCJ3ZWlibyIsImZhY2Vib29rIiwiZ2l0aHViIiwiZG91YmFuIiwiZ29vZ2xlIiwibHVvbGVpIiwiZHJpYmJsZSIsInYyZXgiLCJ6aGlodSIsIndpa2lwZWRpYSIsImppYW5zaHUiLCJ5b3VrdSIsInlvdXR1YmUiLCJuYW1lIiwiTWFwS2V5IiwiaW5kZXhPZiIsImFkZEljb25zIiwiaSIsIl9zcmMiLCJhdHRyIiwidG1wIiwiaHJlZiIsIl9zZWxmRG9tYWluIiwiaG9zdG5hbWUiLCJwcmVwZW5kIiwiX3NlbGZDb2xvciIsImZpbmQiLCJjc3MiLCJfb3JpZ2luYWxDb2xvciIsImhvdmVyIiwibG9hZFFSIiwiYWxpcGF5Iiwid2VjaGF0IiwiaHRtbCIsImRhdGFUaHJlYWRLZXkiLCJwYXRobmFtZSIsImhhcyIsImxlbmd0aCIsInNldEF0dHJpYnV0ZSIsIkRVT1NIVU8iLCJFbWJlZFRocmVhZCIsInNjcm9sbFN0b3AiLCJzZXRUaW1lb3V0IiwiYXBwZW5kIiwiSW1hZ2VTbWFydExvYWRlciIsImlzV2ViUFN1cHBvcnRlZCIsImlzSW1hZ2VDb21wcmVzc2VkIiwid2ViUENoZWNrIiwiaXNDb21wcmVzc2VkQ2hlY2siLCJmZWF0dXJlIiwiVGVzdEltYWdlcyIsImRlbW8iLCJpbWciLCJJbWFnZSIsIndlYlBMb2FkZXIiLCJvbmVycm9yIiwiaW1nTG9hZGVyIiwibGF6eWxvYWQiLCJhZHZhbmNlZF9sb2FkIiwiZGF0YV9hdHRyaWJ1dGUiLCJ3ZWJQX2xvYWQiLCJpc19zY2FsZSIsInNjYWxlX3dpZHRoIiwicmVhZHkiLCIkd2luZG93Iiwib3B0aW9ucyIsInVwZGF0ZSIsImNvdW50ZXIiLCJlbGVtZW50cyIsInNldHRpbmdzIiwic2tpcF9pbnZpc2libGUiLCJpcyIsImFib3ZldGhldG9wIiwibGVmdG9mYmVnaW4iLCJiZWxvd3RoZWZvbGQiLCJyaWdodG9mZm9sZCIsImZhaWx1cmVfbGltaXQiLCJ0cmlnZ2VyIiwiJGNvbnRhaW5lciIsInRocmVzaG9sZCIsImV2ZW50IiwiZWZmZWN0IiwiY29udGFpbmVyIiwiYXBwZWFyIiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWQiLCJmYWlsdXJlbGltaXQiLCJlZmZlY3RzcGVlZCIsImVmZmVjdF9zcGVlZCIsImJpbmQiLCJzZWxmIiwiJHNlbGYiLCJsb2FkZWQiLCJvbmUiLCJlbGVtZW50c19sZWZ0IiwiY2FsbCIsInVwZGF0ZWRVcmwiLCJoaWRlIiwidGVtcCIsImdyZXAiLCJlbGVtZW50IiwidGVzdCIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJmb2xkIiwiaW5uZXJIZWlnaHQiLCJpbnZpZXdwb3J0IiwiZXhwciIsImJlbG93LXRoZS1mb2xkIiwiYSIsImFib3ZlLXRoZS10b3AiLCJyaWdodC1vZi1zY3JlZW4iLCJsZWZ0LW9mLXNjcmVlbiIsImluLXZpZXdwb3J0IiwiYWJvdmUtdGhlLWZvbGQiLCJyaWdodC1vZi1mb2xkIiwibGVmdC1vZi1mb2xkIl0sIm1hcHBpbmdzIjoiQUF1QkEsUUFBU0EsUUFBT0MsRUFBS0MsRUFBVUMsR0FDM0IsR0FBSUMsS0FBU0MsT0FBT0MsY0FDaEJDLEVBQVFILElBQVNDLE9BQU9HLGVBQ3hCQyxFQUFTQyxTQUFTQyxjQUFjLFVBQ2hDQyxFQUFPTCxFQUFRRyxTQUFTRyxnQkFBa0JILFNBQVNJLHFCQUFxQixRQUFRLEVB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QVk0QixFQUFTL0IsS0FPdEV4SixFQUFFRSxPQUFPRixFQUFFOEwsS0FBSyxNQUNaQyxpQkFBa0IsU0FBU0MsR0FDdkIsTUFBT2hNLEdBQUU2SixhQUFhbUMsR0FDbEI5QixVQUFXLEtBR25CK0IsZ0JBQWlCLFNBQVNELEdBQ3RCLE9BQVFoTSxFQUFFNkosYUFBYW1DLEdBQ25COUIsVUFBVyxLQUduQmdDLGtCQUFtQixTQUFTRixHQUN4QixNQUFPaE0sR0FBRThKLFlBQVlrQyxHQUNqQjlCLFVBQVcsS0FHbkJpQyxpQkFBa0IsU0FBU0gsR0FDdkIsT0FBUWhNLEVBQUU4SixZQUFZa0MsR0FDbEI5QixVQUFXLEtBR25Ca0MsY0FBZSxTQUFTSixHQUNwQixNQUFPaE0sR0FBRTZMLFdBQVdHLEdBQ2hCOUIsVUFBVyxLQUluQm1DLGlCQUFrQixTQUFTTCxHQUN2QixPQUFRaE0sRUFBRTZKLGFBQWFtQyxHQUNuQjlCLFVBQVcsS0FHbkJvQyxnQkFBaUIsU0FBU04sR0FDdEIsTUFBT2hNLEdBQUU4SixZQUFZa0MsR0FDakI5QixVQUFXLEtBR25CcUMsZUFBZ0IsU0FBU1AsR0FDckIsT0FBUWhNLEVBQUU4SixZQUFZa0MsR0FDbEI5QixVQUFXLE9BS3ZCMUksUUFBUVEsT0FDUitGLGlCQUFpQi9GLE9BQ2JoQyxFQUFFLFFBQVFJLFNBQVMsbUJBQ25Cb0IsUUFBUTJFLFdBQ1IzRSxRQUFRc0IiLCJmaWxlIjoiZGV2Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQuZm4uZXh0ZW5kKHtcblxuICAgIGlzT25TY3JlZW5WaXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3aW4gPSAkKHdpbmRvdyk7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHtcbiAgICAgICAgICAgIHRvcDogd2luLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgbGVmdDogd2luLnNjcm9sbExlZnQoKVxuICAgICAgICB9O1xuICAgICAgICB2aWV3cG9ydC5yaWdodCA9IHZpZXdwb3J0LmxlZnQgKyB3aW4ud2lkdGgoKTtcbiAgICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgd2luLmhlaWdodCgpO1xuXG4gICAgICAgIHZhciBib3VuZHMgPSB0aGlzLm9mZnNldCgpO1xuICAgICAgICBib3VuZHMucmlnaHQgPSBib3VuZHMubGVmdCArIHRoaXMub3V0ZXJXaWR0aCgpO1xuICAgICAgICBib3VuZHMuYm90dG9tID0gYm91bmRzLnRvcCArIHRoaXMub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICByZXR1cm4gKCEodmlld3BvcnQucmlnaHQgPCBib3VuZHMubGVmdCB8fCB2aWV3cG9ydC5sZWZ0ID4gYm91bmRzLnJpZ2h0IHx8IHZpZXdwb3J0LmJvdHRvbSA8IGJvdW5kcy50b3AgfHwgdmlld3BvcnQudG9wID4gYm91bmRzLmJvdHRvbSkpO1xuICAgIH0sXG5cbn0pO1xuXG5mdW5jdGlvbiBsb2FkSlModXJsLCBjYWxsYmFjaywgZWwpIHtcbiAgICB2YXIgaXNJRSA9ICEhd2luZG93LkFjdGl2ZVhPYmplY3QsXG4gICAgICAgIGlzSUU2ID0gaXNJRSAmJiAhd2luZG93LlhNTEh0dHBSZXF1ZXN0LFxuICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLFxuICAgICAgICBoZWFkID0gaXNJRTYgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgOiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG4gICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlKSB7XG4gICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSA9PSBcImxvYWRlZFwiIHx8IHNjcmlwdC5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICBpZiAoZWwpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc2NyaXB0LCBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgIH1cbn07XG5cbi8qKlxuICogWWFzdWtvIOmFjee9ruaWh+S7tlxuICog5aSa6K+06K+E6K666LCD55So562JXG4gKi9cblxudmFyIGR1b3NodW9RdWVyeSA9IHtcbiAgICBzaG9ydF9uYW1lOiBcImxpZmUtMmJhYlwiXG59O1xuXG52YXIgR2xvYmFsQ29uZmlndWUgPSB7XG4gICAgZHVvc2h1b0RvbWFpbjogJ2h0dHA6Ly9saWZlLjJiYWIubWUnLFxufVxuXG5cbnZhciBHZW5lcmFsID0ge1xuICAgIGlzTW9iaWxlOiBmYWxzZSxcbiAgICBpc1dlY2hhdDogZmFsc2UsXG4gICAgdmlld1dpZHRoOiAkKHdpbmRvdykud2lkdGgoKSxcbiAgICBhYnNVcmw6IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QsXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3aW4gPSB3aW5kb3c7XG4gICAgICAgIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gICAgICAgIHZhciBVQSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKVxuICAgICAgICB2YXIgaXNBbmRyb2lkID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9hbmRyb2lkL2dpKTtcbiAgICAgICAgdmFyIGlzSVBob25lID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9pcGhvbmUvZ2kpO1xuICAgICAgICBpZiAoVUEubWF0Y2goL01pY3JvTWVzc2VuZ2VyL2kpID09IFwibWljcm9tZXNzZW5nZXJcIikge1xuICAgICAgICAgICAgR2VuZXJhbC5pc1dlY2hhdCA9IHRydWU7XG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3dlY2hhdC13ZWJ2aWV3JylcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFpc0FuZHJvaWQpIHtcbiAgICAgICAgICAgIEdlbmVyYWwuaXNNb2JpbGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgR2VuZXJhbC51cGRhdGVJbWFnZVdpZHRoKCk7XG4gICAgICAgICAgICBHZW5lcmFsLnJld2FyZExvYWRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgR2VuZXJhbC53ZWJGb250TG9hZGVyKCk7XG4gICAgICAgIEdlbmVyYWwuc2Nyb2xsVG9Qb3MoKTtcbiAgICAgICAgR2VuZXJhbC5hcnJvd0V2ZW50KCk7XG4gICAgICAgIEdlbmVyYWwuY29tbWVudExvYWRlcigpO1xuICAgIH0sXG4gICAgdXBkYXRlSW1hZ2VXaWR0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkcG9zdENvbnRlbnQgPSAkKFwiLnBvc3QtY29udGVudFwiKTtcbiAgICAgICAgLy8gJHBvc3RDb250ZW50LmZpdFZpZHMoKTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVJbWFnZVdpZHRoKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjb250ZW50V2lkdGggPSAkcG9zdENvbnRlbnQub3V0ZXJXaWR0aCgpLCAvLyBXaWR0aCBvZiB0aGUgY29udGVudFxuICAgICAgICAgICAgICAgIGltYWdlV2lkdGggPSB0aGlzLm5hdHVyYWxXaWR0aDsgLy8gT3JpZ2luYWwgaW1hZ2UgcmVzb2x1dGlvblxuXG4gICAgICAgICAgICBpZiAoaW1hZ2VXaWR0aCA+PSBjb250ZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnZnVsbC1pbWcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2Z1bGwtaW1nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2luZ2xlLXBvc3QtaW5uZXIgaW1nXCIpLm9uKCdsb2FkJywgdXBkYXRlSW1hZ2VXaWR0aCk7XG5cbiAgICAgICAgZnVuY3Rpb24gY2FzcGVyRnVsbEltZygpIHtcbiAgICAgICAgICAgICRpbWcuZWFjaCh1cGRhdGVJbWFnZVdpZHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc3BlckZ1bGxJbWcoKTtcbiAgICB9LFxuICAgIHdlYkZvbnRMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBXZWJGb250Q29uZmlnID0ge1xuICAgICAgICAgICAgbG9hZGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgZm9udCcpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgZmFtaWxpZXM6IFsnRXhvJywgJ2ljb25mb250J10sXG4gICAgICAgICAgICAgICAgdXJsczogW0dlbmVyYWwuYWJzVXJsICsgJy9hc3NldHMvY3NzL2ZvbnQubWluLmNzcyddXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL3dlYmZvbnQuanMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliqDovb3lrZfkvZNKUycpO1xuICAgICAgICAgICAgV2ViRm9udC5sb2FkKHtcbiAgICAgICAgICAgICAgICBjdXN0b206IHtcbiAgICAgICAgICAgICAgICAgICAgZmFtaWxpZXM6IFsnRXhvJywgJ2ljb25mb250J11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcblxuXG5cblxuICAgIH0sXG4gICAgYXJyb3dFdmVudDogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5hcnJvd19kb3duJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQod2luZG93KS5oZWlnaHQoKSAtIDIwXG4gICAgICAgICAgICB9LCA2MDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICAvL+W5s+a7kea7muWKqOWIsOmhtumDqFxuICAgIHNjcm9sbFRvUG9zOiBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgICB2YXIgU1RSX1RPX1RPUCA9ICfmiJHopoHpo57liLDmnIDpq5gnLFxuICAgICAgICAgICAgY292ZXJIZWlnaHQgPSBwb3NpdGlvbiB8fCAkKHdpbmRvdykuaGVpZ2h0KCk7IC8v6I635b6X5Zu+54mH6auY5bqmXG4gICAgICAgIHZhciBidXR0b24gPSAkKCc8YSBocmVmPVwiI1wiIGlkPVwidG8tdG9wXCIgdGl0bGU9XCInICsgU1RSX1RPX1RPUCArICdcIj4gPGRpdiBjbGFzcz1cInRvLXRvcC13cmFwXCI+PC9kaXY+PC9hPicpLmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gJCh3aW5kb3cpLmhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24uZmFkZU91dCg1MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBidXR0b24uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXG4gICAgICAgICAgICB9LCA2NjYsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5oiR6LezJyk7XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICAvKue7meaWh+eroOS4reeahHVybOa3u+WKoGljb25mb2505pa55L6/6K+G5YirKi9cbiAgICB1cmxJY29ubGl6ZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBkb21haW4sXG4gICAgICAgICAgICBfb3V0cHV0O1xuICAgICAgICB2YXIgaWNvbkZvbnRUYWcgPSAnaWNvbmZvbnQnO1xuICAgICAgICB2YXIgaWNvbk1hcCA9IHsgLyrntKLlvJUg5Y+v5Zyo6L+Z6YeM5re75Yqg5Yy56YWN6KeE5YiZKi9cbiAgICAgICAgICAgICd0d2l0dGVyJzogaWNvbkZvbnRUYWcgKyAnLXR3aXR0ZXInLFxuICAgICAgICAgICAgJ3F6b25lJzogaWNvbkZvbnRUYWcgKyAnLXF6b25lJyxcbiAgICAgICAgICAgICd3ZWlibyc6IGljb25Gb250VGFnICsgJy13ZWlibycsXG4gICAgICAgICAgICAnZmFjZWJvb2snOiBpY29uRm9udFRhZyArICctZmFjZWJvb2snLFxuICAgICAgICAgICAgJ2dpdGh1Yic6IGljb25Gb250VGFnICsgJy1naXRodWInLFxuICAgICAgICAgICAgJ2RvdWJhbic6IGljb25Gb250VGFnICsgJy1kb3ViYW4nLFxuICAgICAgICAgICAgJ2dvb2dsZSc6IGljb25Gb250VGFnICsgJy1nb29nbGUnLFxuICAgICAgICAgICAgJ2x1b2xlaSc6IGljb25Gb250VGFnICsgJy1sdW9sZWknLFxuICAgICAgICAgICAgJ2RyaWJibGUnOiBpY29uRm9udFRhZyArICctZHJpYmJsZScsXG4gICAgICAgICAgICAndjJleCc6IGljb25Gb250VGFnICsgJy12MmV4JyxcbiAgICAgICAgICAgICd6aGlodSc6IGljb25Gb250VGFnICsgJy16aGlodScsXG4gICAgICAgICAgICAnd2lraXBlZGlhJzogaWNvbkZvbnRUYWcgKyAnLXdpa2lwZWRpYScsXG4gICAgICAgICAgICAnamlhbnNodSc6IGljb25Gb250VGFnICsgJy1qaWFuc2h1JyxcbiAgICAgICAgICAgICd5b3VrdSc6IGljb25Gb250VGFnICsgJy15b3VrdScsXG4gICAgICAgICAgICAneW91dHViZSc6IGljb25Gb250VGFnICsgJy15b3V0dWJlJ1xuXG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIGljb25NYXApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWNvbk1hcFtuYW1lXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciBNYXBLZXkgPSBuYW1lO1xuICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihNYXBLZXkpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluID0gTWFwS2V5O1xuICAgICAgICAgICAgICAgICAgICBfb3V0cHV0ID0gaWNvbk1hcFtNYXBLZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfb3V0cHV0O1xuICAgIH0sXG4gICAgYWRkSWNvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvKue7meWNmuWuouaWh+eroOWcsOWdgHVybOa3u+WKoGljb+ivhuWIqyovXG4gICAgICAgICQoJy5zaW5nbGUtcG9zdC1pbm5lciAgYTpub3QoOmhhcyhpbWcpKScpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgdmFyIF9zcmMgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICB0bXAuaHJlZiA9IF9zcmM7XG4gICAgICAgICAgICBfc2VsZkRvbWFpbiA9IHRtcC5ob3N0bmFtZTtcbiAgICAgICAgICAgIEdlbmVyYWwudXJsSWNvbmxpemUoX3NlbGZEb21haW4pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coX3NlbGZEb21haW4pO1xuICAgICAgICAgICAgJCh0aGlzKS5wcmVwZW5kKCc8aSBjbGFzcz1cImljb25mb250ICcgKyBHZW5lcmFsLnVybEljb25saXplKF9zZWxmRG9tYWluKSArICdcIj48L2k+Jyk7XG4gICAgICAgICAgICB2YXIgX3NlbGZDb2xvciA9ICQodGhpcykuZmluZCgnaScpLmNzcygnY29sb3InKSxcbiAgICAgICAgICAgICAgICBfb3JpZ2luYWxDb2xvciA9ICQodGhpcykuY3NzKCdjb2xvcicpO1xuXG4gICAgICAgICAgICAvKum8oOagh+aCrOa1ruaXtiovXG4gICAgICAgICAgICAkKHRoaXMpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsIF9zZWxmQ29sb3IpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHB1bHNlJyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCBfb3JpZ2luYWxDb2xvcik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgcHVsc2UnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy/miZPotY9cbiAgICByZXdhcmRMb2FkZXI6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBsb2FkUVIgPSB7XG4gICAgICAgICAgICBhbGlwYXk6ICcvYXNzZXRzL2ltYWdlcy9xci1hbGlwYXktMjU2LnBuZycsXG4gICAgICAgICAgICB3ZWNoYXQ6ICcvYXNzZXRzL2ltYWdlcy9xci13ZWNoYXQtMjU2LnBuZydcbiAgICAgICAgfVxuICAgICAgICB2YXIgbG9hZFFSVXJsO1xuICAgICAgICBpZiAoISFHZW5lcmFsLmlzV2VjaGF0KSB7XG4gICAgICAgICAgICAkKCcud2VjaGF0LWNvZGUgYicpLmh0bWwoJ+mVv+aMieS4iuaWueS6jOe7tOeggeaJk+i1j+S9nOiAhScpO1xuICAgICAgICAgICAgLy8gJCgnLnFyLWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcubW9uZXktbGlrZSAucmV3YXJkLWJ1dHRvbicpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+aCrOa1ricpXG4gICAgICAgICAgICAkKCdpbWcud2VjaGF0LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi53ZWNoYXQpO1xuICAgICAgICAgICAgJCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcbiAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZUluKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9LCA4MDApXG5cbiAgICAgICAgJCgnLm1vbmV5LWxpa2UgLnJld2FyZC1idXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nLndlY2hhdC1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIud2VjaGF0KTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZy5hbGlwYXktaW1nJykuYXR0cignc3JjJywgbG9hZFFSLmFsaXBheSk7XG4gICAgICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlSW4oKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuXG4gICAgfSxcbiAgICBjb21tZW50TG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhVGhyZWFkS2V5ID0gR2xvYmFsQ29uZmlndWUuZHVvc2h1b0RvbWFpbiArIGxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQoJy5jb21tZW50LWFyZWEnKS5oYXMoJ2RpdicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WinuWKoOivhOiuuicpO1xuICAgICAgICAgICAgICAgIGlmICgoJCgnLmF1dGhvci1pbWFnZScpLmlzT25TY3JlZW5WaXNpYmxlKCkgfHwgJCgnLnJlYWQtbmV4dCcpLmlzT25TY3JlZW5WaXNpYmxlKCkpICYmICQoJy5hdXRob3ItaW1hZ2UnKS5oYXNDbGFzcygnZHVvc2h1by1sb2FkZWQnKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuYXV0aG9yLWltYWdlJykuYWRkQ2xhc3MoJ2R1b3NodW8tbG9hZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL2R1b3NodW8ubW9kaWZ5LmpzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS10aHJlYWQta2V5JywgZGF0YVRocmVhZEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJywgbG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAkKCd0aXRsZScpLmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBEVU9TSFVPLkVtYmVkVGhyZWFkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFN0b3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29tbWVudC1hcmVhJykuYXBwZW5kKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDI1MClcblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuXG52YXIgSW1hZ2VTbWFydExvYWRlciA9IHtcbiAgICBpc1dlYlBTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgIGlzSW1hZ2VDb21wcmVzc2VkOiBmYWxzZSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQQ2hlY2soKTtcbiAgICB9LFxuICAgIGlzQ29tcHJlc3NlZENoZWNrOiBmdW5jdGlvbigpIHtcblxuICAgIH0sXG4gICAgd2ViUENoZWNrOiBmdW5jdGlvbihmZWF0dXJlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgVGVzdEltYWdlcyA9IHtcbiAgICAgICAgICAgIGRlbW86IFwiVWtsR1Jrb0FBQUJYUlVKUVZsQTRXQW9BQUFBUUFBQUFBQUFBQUFBQVFVeFFTQXNBQUFBQkJ4QVJFWWlJL2djQUFBQldVRGdnR0FBQUFEQUJBSjBCS2dFQUFRQUJBQndscEFBRGNBRCsvZ2JRQUE9PVwiXG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJw5ZOmJyk7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IChpbWcud2lkdGggPiAwKSAmJiAoaW1nLmhlaWdodCA+IDApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+aUr+aMgVdlYnAnKTtcbiAgICAgICAgICAgIC8vIGFsZXJ0KCfmlK/mjIEnKVxuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQTG9hZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5LiN5pSv5oyBV2VicCcpO1xuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFwiICsgVGVzdEltYWdlc1snZGVtbyddO1xuXG4gICAgfSxcbiAgICBpbWdMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L296buY6K6k5Zu+54mHJyk7XG4gICAgfSxcbiAgICB3ZWJQTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9vXdlYlAnKTtcbiAgICAgICAgLy8gYWxlcnQoSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQpO1xuICAgICAgICBpZiAoSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+WuveW6puaYrycgKyBHZW5lcmFsLnZpZXdXaWR0aCk7XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPT0gNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA8IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhbGVydCgn5pmu6YCa5pSv5oyBJylcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA9PSA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogMTUwMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA8IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSxcblxuXG59XG5cblxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICB2YXIgJHdpbmRvdyA9ICQod2luZG93KTtcblxuICAgICQuZm4ubGF6eWxvYWQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgICAgIHZhciAkY29udGFpbmVyO1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgICAgICBmYWlsdXJlX2xpbWl0OiAwLFxuICAgICAgICAgICAgZXZlbnQ6IFwic2Nyb2xsXCIsXG4gICAgICAgICAgICBlZmZlY3Q6IFwic2hvd1wiLFxuICAgICAgICAgICAgY29udGFpbmVyOiB3aW5kb3csXG4gICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogXCJvcmlnaW5hbFwiLFxuICAgICAgICAgICAgc2tpcF9pbnZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgYXBwZWFyOiBudWxsLFxuICAgICAgICAgICAgbG9hZDogbnVsbCxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaGJnQUtBSUFBQVAvLy8vLy8veUgvQzA1RlZGTkRRVkJGTWk0d0F3RUFBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBQUFDSUl5UHFjdnRENk9jdE5xTHM5NjgrdytHNGtpVzVvbW02c3EyN2d2SDhsVUFBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVNKR2NoQkpHYnJ2aHNDekljQTMzaDd6SE9RLzBBUGdYY29CSS9JU2dLd0l5aVNVS1FnVUhoR3I5aXNkc3Q5UlFBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbGFCbklReWVtKzhJVUE5Q0hFZUU0ZU5CM293T0NHMERzVWhNaWtKQUhnRVJUS2FGQVFLRUNsMkt4Mnk5MUdBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVBuREpTYXU5T092TnUvOWdLSTVrYVpZR2NoREo2Yjd3aFFEMEljUjRUaDQwSGVqQTRJYlFPeFNFeUtRa0FlQVJGTXBvVUJBb1FLWFlySGJMalVVQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptUnBucGlCSEVTQ3ZuQThJVUI5Q0hLdWgwZGRCN3VnRUVQd0hRckRaRElCNkJFVXltaFFFQ2hBcGRpc2Rzc05SUUFBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJENXd5VW1ydlRqcnpidi9ZQ2lPWkdtZW5ZRWNSSUsrY0R3aFFIMEljcTZIUjEwSHU2QVFRL0FkQ3NOa01nSG9FUlRLYUZBUUtFQ2wyS3gyeStWRUFBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFVVhESlNhdTlPT3ZOdS85Z0tJNWt1U1RFZ1JobWk2RXE2NVlDWUFQSXJDLzFuZStpd0FFd1BBQmRBYUxOZUFRVmJnQkMwL1JVU3FjZVJZcVl3SklNMjBQWDIxRVVBZ0l5eVl4V3U5L3d1SHdhQVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVVM0RKU2F1OU9Pdk51LzlnS0k1a1dTYkVnUmptWmlBSGtiVDBLQUE0Z05RWWtoOENucEFUT0FDTWgyRWxod3NvbjVZQ2t3Q1ZFSTdIUW5XclNCMW4xVVNPb05oeUM0R2dXUkJJbE0zd3VIeE9oMGNBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUlFjTWxKcTcwNDY4MjcvMkFvam1ScGVnbHhJTWFZcnUwcHo1Y0EzQUFpMnJoTy83VEFBVEE4aUFMRW14SElOQlZ3QUlMb21aUTJyeUtGaXBnUUdiYUhMbmI4VVJRQ0FwSVpUVzY3My9DNE93SUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkZWd3lVbXJ2VGpyemJ2L1lDaU9aR21lUzBJY2lKRVp5RUVrYUcxL0FxQURTSWJzQjhGdFNLd0VEZ0RrSWJQVEJZclFZYUZKeUJDU3lVSjBpMUtza2pSTVlrZFFjTThsUlNFZzFBZ0NDVE42VHEvYjc2WUlBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSU2NNbEpxNzA0NjgyNy8yQW9qbVJwbmxaQ0hJaFJxYXlMenJRb0FEaUFVSGUrMThCZ0puQUFGQStVZ0JHSEZEcWZoUnlBUUlrdXFjOHNVTEV5SmlpRzd1R3JMYzhVaFlEQWdsYWIzL0M0Zkg2S0FBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFYVhESlNhdTlPT3ZOdS85Z0tJNmtseEFIWXBTc1ppQUhrVlJ2UExlY0FPd0FndjhVQk84Z0NBNkxRRXpnQUdBZWtrRGVMa0JoOHFoUVMwRkt5T0lJeldhQkF0NGR4bDZLQXRXOHBVa0pIa0ZCaVRQbmIzVWhnTXlUQkFFSmRCV0FCWU4raUltS2k0eHZFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVkzREpTYXU5T092TnUvOWdLSTVrMlNYRWdSZ21oNm9zOWE1dGpRbEFEaUQycmU4VW5JN1hLeTRDQjBEeVlLd0VsRG5tNUpsVU5udUZIK0U2eVVLMzNTZ0F6RFVwVXNwRWVXRkFIOVNUOWhLK0xpa0tBVUY5Y2M5YitucDdnb09FaFlaRkVRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFYVhESlNhdTlPT3ZOdS85Z0tJNWthVm9KY1NER2FDQUhrVlJ2UEorNEtRQThnSXlJM2tGQUNmS0d1YVFvY0FBMEQ2TWVMMEJwOXFqS2JLY2dKWXdJVG1lQkFqNk90ZWlNUXVXOGhSSTlnb0lDYjhyVCtJdWlFQ0NTQkFFSmN4V0FCWU41aUltS2k0eUxFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVpIREpTYXU5T092TnUvOWdLSTVrYVlJSmNTQ0dscTR0OWJKbmJWOENvQU5JbHUrOXlVOFh2QmxyZ1FOQWVjZ0VscnJtNUtsY0hxK213ZzVBeUdpaDNjbFhHY2FhUVFyVk1wRXhxQS9zaVpzWlA5czdpa0pBc01udkxYNThkNE9FaFlhSFp4RUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkdsd3lVbXJ2VGpyemJ2L1lDaU9aR21XQ1hFZ1JtVWdCNUc0c0h6ZU9DY0FQSUJVaU41QlFBbnlocm1rVWhJNEFKeUhTbzhYb0RoNzFhWDJWSmdTS29UbnMwQUpIOG5iOUVpaGVzNG9pUjVCQVJmUDFmaVFvaEFnV2dRQkNYUVZnQVdEZVlpSmlvdU1OeEVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJITnd5VW1ydlRqcnpidi9ZQ2lPcEdhVXFJa2NSR0lseElHY0ZDelRhWVhrUElVQXdJT0FJZ0FDZDVPaUVkbVRISm85SXpCQUNVaWZFNnNSQ3lWQWVRVEFRVnlnRk1aajc2UWdGcXVocm04cVlTUW9LSXFZT0M0eDZBRjhjb0lsQWdFSmR4VUtCUUZEaVl1Tmc1R1NrNVNWbGhRUkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVNBY01sSnE3MDQ2ODI3LzJBb2ptUlpKY1NCR0NhSHFpeGxJQWVSVkhOOXQ2VUEvQUFFTCtNRENpa0k0RUdBVkRLSG9zQUJNRDFBTHdIcXowb0IvZ0tVS1JCOEJSVzhoSExsckUxVENOcEQ0YTJjcXoyS0ZIVjNYeGowQjN3U0NVQUVDaFNFVTRaOWVBVUJUNHdMQ282UUZBSUJDWWNWbHdXYWtaK2dvYUtqb0JFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCSDF3eVVtcnZUanJ6YnYvWUNpT1pFa214SUVZbzRFY1JHS2hLa3ZScTZsN0F1QURpQkhpZHhCUWVyL2dCT2xUN3A2WXdBRXdQWXgrdmdBbGdMVk91RVNvMkZMQUVrWUVLclZBS1ZRQjUwbTVHaC9iRlNtcVRKVDRFUlFVZUZWN0VnWjVBSVIyWXdvRkFVWWtBZ0VKZ0JXTWpoYVdqNHFibkoyZW42QWhFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWdIREpTYXU5T092TnUvOWdLSTVrYVdJSmNTQ0dscTR0WlNBSGtWUnpmWjk4S1FCQUFDTHpDdzRwaU9CQmdGUXllMUJRNEFDZ0hqS0JLdkJLQ1FJREZHb1FIQzF6Q2w1Q0JxMVZVd2phUStHdG5KdnZHSVdxdXJzWTlnZDlFZ2xCQkFvVWhGU0dlSXdXQ2dVQlR4bVBrUmNDQVFtSEZaY0ZtbzJmb0tHaW81OFJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSL2NNbEpxNzA0NjgyNy8yQW9qbVJwZGdseElFWmxJQWVSV09uYVVqVjc3dndpQUVBQW9vSUlIZ1NVWDNBNFVRS1p2YWdvY0FCVUQ1VWdNRUFKYUxFVHIxRktCaFcwaEFyQmFpMVFDbGRBZW5LK3pzdDRqVUpsbmVHQ0JBb1VlMWQrRWdaOEFJWjVqQllLQlFGSUZnSUJDWUlWajVHT2tKS05ucCtnb2FKU0VRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFZ0hESlNhdTlPT3ZOdS85Z0tJNWthWFlHY2hDSmxSQUhZbFRwMm1adlBKOThpUURBZzRBaUFBSVJsVjl3ZUNrYWtiMW82R0FFQkNpQjZxRlN0V0t5eHExMDNDR0VDNVFDbFVxb21OZm9peHJBSnRzMUNUcUFvS0FZWUhRM0UzbEFmQmdLZ0FlQ2Q0eEVBUVY5RlFvRkFVd1ZBZ0VKa1llVWxvMmZvS0dpbzJNUkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVI4Y01sSnE3MDQ2ODI3LzJBb2ptUnBlZ2x4SUVabElBZVJXT25haWpWNzdwd0EvQUJFQlFFOENDZytvRENVL0MxNVVFdmdBS0FlS3NCZmdCTElYa1BkWW5STUtXUUpGVUsxV2loYkFlaVEyUm9uanhXcTZveVNBQklVRkhoV2V5QUdlUUNFZGxFS0JRRkhGZ0lCQ1lBVmpJNGtsbytLbTV5ZG5wK0tFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWZIREpTYXU5T092TnUvOWdLSTVrYVhvR2NoQ0psUkFIWWxUcDJwN2FlK0FuQXZ3SEFVWHcreUVxUHFDUVp5SCttS1ZERVJDZ0JLWTd5cFFLclZ5ZlhSR2hlQ2hRQ2xJcG9USk9tOE1TTkNBTC95VG1BSUtDWW9ETmJ4TjNQM3AxQ3dwK2hTQUNBUVY3RlFvRkFVc1Zpd21PaFpCVmladWNuWjZmRmhFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCR3R3eVVtcnZUanJ6YnYvWUNpT1pHbCtDWEVnUm1VZ0I1Rlk2ZHFlZUs0SlFBOGdGWVR2SUtEd2ZFQ2RjcmtJSEFEUFE4WFhDMUFDVkNsemV5cFFDUlVDRkZxZ0ZLSUFNSGM5VXFpZ00wckNSMUJRM05FNGUvOVJGQUpGRmdJQkNYWVZmb0I4aW91TWpZNXJFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWEzREpTYXU5T092TnUvOWdLSTVrYVg0R2NoQ0psUkFIWW1odlBKOTRiaUZBZndnVVFhK0h5QWlIUloweWR4Z0NBcFNBODVDUkRxbkxiSWx3TFZBS3pTWWhVd0NFeDlwMEtHRUdFQlFVQTh6Y3dzaWJnTHA2M3hFRUNuQVZDZ1VCUUJxRGhYeUtpNHlOam5zUkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJwY01sSnE3MDQ2ODI3LzJBb2ptUnBnZ2x4SUVabElBZVJrT25hbm5ncEFEeUFWSWplUVNEYTlYNjVaQ2h3QURRUGxSNHZJQXBJb2Nwc3B5QWxWQWhPWjBGVWVBSzgyblJHb1hMT0tJa2VRU0ZpUDkvcWZFVlJDQkF0QWdFSmRDTjhmbnFJaVlxTGpGb1JBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFScmNNbEpxNzA0NjgyNy8yQW9qbVJwZ2daeUVJbVZFQWRpbk5zYnozUmVJVUIvQ0JSQnI0ZlFYWVREb3RGNEdBSUNsSUR6c0t4SWg5UnFqb0F0VUFyTkprRTdLUURDWS9JcGNRWVFGQlFEN054U3k1dUF1dG9rQ0JUZ0ZRb0ZBVUI3QzRLRWhvcUxqSTJPR0JFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRlZ3eVVtcnZUanJ6YnYvWUNpT1pHbUdDWEVnUm1VZ0I1R2NkRzBLUUE0Z0ZhSWZBcHR3eUFrY0FNZERSWmNMRUovUVNZRkpxQkNReUVKME8xU29rRE5LUWtkUWNNODFSU0VRdEFnQ0NUTjZUcS9iNzlzSUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJRY01sSnE3MDQ2ODI3LzJBb2ptUnBoZ1p5RUltV3J1MHB6eUVDM0llUTJiaE8vOERMNFhZTFpJWkVZM0FaSkJBUGhZd1RGMlZhWnduQWtLRElGSkRjcS9na0NCUzZtbklDUFc2NzMvRDROUUlBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJGTnd5VW1ydlRqcnpidi9ZQ2lPWkdtS0NYRWd4bWdnQjVHY2RJMEpRQTRnSTZJZkFwdlFGamdBakllUkxoY1lPazJGSldGRU9CNEx6NnhJb1RyT1VEcUNRa3YrS0FxQklFa1FTSXpMOExoOFRuOUdBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVVIREpTYXU5T092TnUvOWdLSTVrYVlvR2NoREp1YVZyNjg0Z0F0eUhRRjgycnUvQXpPRjJDd1FwUTZMeHlKd1FpSWRDYy9IRVNhZk1CR0JJVUV3THlTNjJLUWdVdk5oeUFqMXV1OS93T0NZQ0FDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptUnBqZ2x4SU1icHZyQWxBRFNBeEhoT0JnZlFIN3FnY0ZPb0FRakRwRktpVVBrU3k2aFFVUWdJcE5pc2Rzc05SZ0FBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJENXd5VW1ydlRqcnpidi9ZQ2lPWkdtZVMwSWNpSUcrY0N3SlFBMGdjcTZId1FINGg1MXdpQ25ZQUFTaVVxbFkvUkxMcUZCUkNBaWsyS3gyeTRWRkFBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFUG5ESlNhdTlPT3ZOdS85Z0tJNWthWjViUWh5SWdiNXdMQWxBRFNCeXJvZkJBZmlIblhDSUtkZ0FCS0pTcVZqOUVzdW9VRkVJQ0tUWXJIYkxCVVVBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUStjTWxKcTcwNDY4MjcvMkFvam1ScG5xaVVFQWRpcEhBTUMwQU5JSEt1aDhFQitJZWRjSWdwMkFBRW9sS3BZUDBTeTZoUVVRZ0lwTmlzZHN0ZFJBQUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkQxd3lVbXJ2VGpyemJ2L1lDaU9aR21lcUprUUIyS2tjQXdMUUEwZ2NxNkh3UUg0aDUxd2lDbllBQVNpVXFsZy9STExxRkJSQ0FpazJLeDJpNG9BQURzPVwiLFxuICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlLFxuICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcblxuICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNraXBfaW52aXNpYmxlICYmICEkdGhpcy5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCQuYWJvdmV0aGV0b3AodGhpcywgc2V0dGluZ3MpIHx8XG4gICAgICAgICAgICAgICAgICAgICQubGVmdG9mYmVnaW4odGhpcywgc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGhpbmcuICovXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghJC5iZWxvd3RoZWZvbGQodGhpcywgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAgICAgICAgICEkLnJpZ2h0b2Zmb2xkKHRoaXMsIHNldHRpbmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICAvKiBpZiB3ZSBmb3VuZCBhbiBpbWFnZSB3ZSdsbCBsb2FkLCByZXNldCB0aGUgY291bnRlciAqL1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKytjb3VudGVyID4gc2V0dGluZ3MuZmFpbHVyZV9saW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAvKiBNYWludGFpbiBCQyBmb3IgYSBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmZhaWx1cmVsaW1pdCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmFpbHVyZV9saW1pdCA9IG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmZhaWx1cmVsaW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZWZmZWN0c3BlZWQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmVmZmVjdF9zcGVlZCA9IG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIENhY2hlIGNvbnRhaW5lciBhcyBqUXVlcnkgYXMgb2JqZWN0LiAqL1xuICAgICAgICAkY29udGFpbmVyID0gKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykgPyAkd2luZG93IDogJChzZXR0aW5ncy5jb250YWluZXIpO1xuXG4gICAgICAgIC8qIEZpcmUgb25lIHNjcm9sbCBldmVudCBwZXIgc2Nyb2xsLiBOb3Qgb25lIHNjcm9sbCBldmVudCBwZXIgaW1hZ2UuICovXG4gICAgICAgIGlmICgwID09PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XG4gICAgICAgICAgICAkY29udGFpbmVyLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmu5rliqjkuoYxMTEnKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5rua5YqoJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHNlbGYpO1xuXG4gICAgICAgICAgICBzZWxmLmxvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvKiBJZiBubyBzcmMgYXR0cmlidXRlIGdpdmVuIHVzZSBkYXRhOnVyaS4gKi9cbiAgICAgICAgICAgIGlmICgkc2VsZi5hdHRyKFwic3JjXCIpID09PSB1bmRlZmluZWQgfHwgJHNlbGYuYXR0cihcInNyY1wiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCBzZXR0aW5ncy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLmFkZENsYXNzKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFdoZW4gYXBwZWFyIGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlLiAqL1xuXG4gICAgICAgICAgICAkc2VsZi5vbmUoXCJhcHBlYXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuYXBwZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmFwcGVhci5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZFVybCA9ICRzZWxmLmF0dHIoXCJkYXRhLVwiICsgc2V0dGluZ3MuZGF0YV9hdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFVybC5pbmRleE9mKCdxaW5pdWNuZCcpID4gLTEgfHwgdXBkYXRlZFVybC5pbmRleE9mKCdjbG91ZGRuJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hZHZhbmNlZF9sb2FkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICchJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5pc19zY2FsZSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnLzAvdy8nICsgc2V0dGluZ3Muc2NhbGVfd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2ViUF9sb2FkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICcvZm9ybWF0L3dlYnAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgICAgICQoXCI8aW1nIC8+XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYmluZChcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCdcIiArIHVwZGF0ZWRVcmwgKyBcIicpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZltzZXR0aW5ncy5lZmZlY3RdKHNldHRpbmdzLmVmZmVjdF9zcGVlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgaW1hZ2UgZnJvbSBhcnJheSBzbyBpdCBpcyBub3QgbG9vcGVkIG5leHQgdGltZS4gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9ICQuZ3JlcChlbGVtZW50cywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVsZW1lbnQubG9hZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gJCh0ZW1wKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5sb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c19sZWZ0ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5sb2FkLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzcmNcIiwgdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIFdoZW4gd2FudGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlICovXG4gICAgICAgICAgICAvKiBieSB0cmlnZ2VyaW5nIGFwcGVhci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKDAgIT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgICAgICAgICAkc2VsZi5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiBDaGVjayBpZiBzb21ldGhpbmcgYXBwZWFycyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLiAqL1xuICAgICAgICAkd2luZG93LmJpbmQoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogV2l0aCBJT1M1IGZvcmNlIGxvYWRpbmcgaW1hZ2VzIHdoZW4gbmF2aWdhdGluZyB3aXRoIGJhY2sgYnV0dG9uLiAqL1xuICAgICAgICAvKiBOb24gb3B0aW1hbCB3b3JrYXJvdW5kLiAqL1xuICAgICAgICBpZiAoKC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikpIHtcbiAgICAgICAgICAgICR3aW5kb3cuYmluZChcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBGb3JjZSBpbml0aWFsIGNoZWNrIGlmIGltYWdlcyBzaG91bGQgYXBwZWFyLiAqL1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyogQ29udmVuaWVuY2UgbWV0aG9kcyBpbiBqUXVlcnkgbmFtZXNwYWNlLiAgICAgICAgICAgKi9cbiAgICAvKiBVc2UgYXMgICQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHt0aHJlc2hvbGQgOiAxMDAsIGNvbnRhaW5lciA6IHdpbmRvd30pICovXG5cbiAgICAkLmJlbG93dGhlZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiAkd2luZG93LmhlaWdodCgpKSArICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcCArICQoc2V0dGluZ3MuY29udGFpbmVyKS5oZWlnaHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wIC0gc2V0dGluZ3MudGhyZXNob2xkO1xuICAgIH07XG5cbiAgICAkLnJpZ2h0b2Zmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy53aWR0aCgpICsgJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikud2lkdGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCAtIHNldHRpbmdzLnRocmVzaG9sZDtcbiAgICB9O1xuXG4gICAgJC5hYm92ZXRoZXRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS5oZWlnaHQoKTtcbiAgICB9O1xuXG4gICAgJC5sZWZ0b2ZiZWdpbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0ICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS53aWR0aCgpO1xuICAgIH07XG5cbiAgICAkLmludmlld3BvcnQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChlbGVtZW50LCBzZXR0aW5ncykgJiYgISQubGVmdG9mYmVnaW4oZWxlbWVudCwgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAhJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmFib3ZldGhldG9wKGVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICB9O1xuXG4gICAgLyogQ3VzdG9tIHNlbGVjdG9ycyBmb3IgeW91ciBjb252ZW5pZW5jZS4gICAqL1xuICAgIC8qIFVzZSBhcyAkKFwiaW1nOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIG9yICovXG4gICAgLyogJChcImltZ1wiKS5maWx0ZXIoXCI6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgd2hpY2ggaXMgZmFzdGVyICovXG5cbiAgICAkLmV4dGVuZCgkLmV4cHJbXCI6XCJdLCB7XG4gICAgICAgIFwiYmVsb3ctdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImFib3ZlLXRoZS10b3BcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwibGVmdC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImluLXZpZXdwb3J0XCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmludmlld3BvcnQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qIE1haW50YWluIEJDIGZvciBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgIFwiYWJvdmUtdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImxlZnQtb2YtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIEdlbmVyYWwuaW5pdCgpO1xuICAgIEltYWdlU21hcnRMb2FkZXIuaW5pdCgpO1xuICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICBHZW5lcmFsLmFkZEljb25zKCk7XG4gICAgICAgIEdlbmVyYWwuY29tbWVudExvYWRlcigpO1xuXG4gICAgfVxuXG59KVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
